
QT4_WRAP_UI( PLUGIN_UIC_FILES ${PLUGIN_UI_FILES} )

QT4_WRAP_CPP( PLUGIN_MOC_FILES ${PLUGIN_QOBJECT_FILES} )

IF(APPLE)
	SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -L/usr/local/lib")
ENDIF(APPLE)

IF( ${CMAKE_BUILD_TYPE} STREQUAL Debug )

	ADD_DEFINITIONS(-DDEBUG)

	IF(WIN32)
		link_directories( ${CGoGN_ROOT_DIR}/lib/Release )
	ELSE (WIN32)
		link_directories( ${CGoGN_ROOT_DIR}/lib/Debug ${CGoGN_ROOT_DIR}/lib/Release )
	ENDIF (WIN32)

	ADD_LIBRARY( ${PLUGIN_NAME}D SHARED
		${PLUGIN_FILES}
		${PLUGIN_UIC_FILES}
		${PLUGIN_MOC_FILES}
	)

	TARGET_LINK_LIBRARIES( ${PLUGIN_NAME}D
		${CGoGN_LIBS_D}
		${EXT_LIBS}
	)

	ADD_DEPENDENCIES( ${PLUGIN_NAME}D SCHNAppsD )

	SET_TARGET_PROPERTIES( ${PLUGIN_NAME}D PROPERTIES COMPILE_DEFINITIONS "DEBUG" )
		
ELSE ( ${CMAKE_BUILD_TYPE} STREQUAL Debug )
	
	IF(WIN32)
	link_directories( ${CGoGN_ROOT_DIR}/lib/Release )
	ELSE (WIN32)
		link_directories( ${CGoGN_ROOT_DIR}/lib/Release )
	ENDIF (WIN32)

	ADD_LIBRARY( ${PLUGIN_NAME} SHARED
		${PLUGIN_FILES}
		${PLUGIN_UIC_FILES}
		${PLUGIN_MOC_FILES}
	)

	TARGET_LINK_LIBRARIES( ${PLUGIN_NAME}
		${CGoGN_LIBS_R}
		${EXT_LIBS}
	)

	ADD_DEPENDENCIES( ${PLUGIN_NAME} SCHNApps )
	
ENDIF ( ${CMAKE_BUILD_TYPE} STREQUAL Debug )
